<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from happygitwithr.com/rmd-test-drive.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2022 03:45:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 18 Test drive R Markdown | Happy Git and GitHub for the useR</title>
<meta name="author" content="Jenny Bryan, the STAT 545 TAs, Jim Hester">
<meta name="description" content="We will author an R Markdown document and render it to HTML. We discuss how to keep the intermediate Markdown file, the figures, and what to commit to Git and push to GitHub. If GitHub is the...">
<meta name="generator" content="bookdown 0.25 with bs4_book()">
<meta property="og:title" content="Chapter 18 Test drive R Markdown | Happy Git and GitHub for the useR">
<meta property="og:type" content="book">
<meta property="og:url" content="rmd-test-drive.html">
<meta property="og:image" content="img/watch-me-diff-watch-me-rebase-smaller.png">
<meta property="og:description" content="We will author an R Markdown document and render it to HTML. We discuss how to keep the intermediate Markdown file, the figures, and what to commit to Git and push to GitHub. If GitHub is the...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 18 Test drive R Markdown | Happy Git and GitHub for the useR">
<meta name="twitter:site" content="@jennybryan">
<meta name="twitter:description" content="We will author an R Markdown document and render it to HTML. We discuss how to keep the intermediate Markdown file, the figures, and what to commit to Git and push to GitHub. If GitHub is the...">
<meta name="twitter:image" content="img/watch-me-diff-watch-me-rebase-smaller.png">
<!-- JS --><script src="../cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="../cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="../kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-131856976-1"></script><script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-131856976-1');
  </script><script src="../cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="../cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Happy Git and GitHub for the useR</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Let’s Git started</a></li>
<li><a class="" href="big-picture.html"><span class="header-section-number">1</span> Why Git? Why GitHub?</a></li>
<li><a class="" href="contrib.html"><span class="header-section-number">2</span> Contributors</a></li>
<li><a class="" href="workshops.html"><span class="header-section-number">3</span> Workshops</a></li>
<li class="book-part">Installation</li>
<li><a class="" href="install-intro.html">Half the battle</a></li>
<li><a class="" href="github-acct.html"><span class="header-section-number">4</span> Register a GitHub account</a></li>
<li><a class="" href="install-r-rstudio.html"><span class="header-section-number">5</span> Install or upgrade R and RStudio</a></li>
<li><a class="" href="install-git.html"><span class="header-section-number">6</span> Install Git</a></li>
<li><a class="" href="hello-git.html"><span class="header-section-number">7</span> Introduce yourself to Git</a></li>
<li><a class="" href="git-client.html"><span class="header-section-number">8</span> Install a Git client</a></li>
<li class="book-part">Connect Git, GitHub, RStudio</li>
<li><a class="" href="connect-intro.html">Can you hear me now?</a></li>
<li><a class="" href="https-pat.html"><span class="header-section-number">9</span> Personal access token for HTTPS</a></li>
<li><a class="" href="ssh-keys.html"><span class="header-section-number">10</span> Set up keys for SSH</a></li>
<li><a class="" href="push-pull-github.html"><span class="header-section-number">11</span> Connect to GitHub</a></li>
<li><a class="" href="rstudio-git-github.html"><span class="header-section-number">12</span> Connect RStudio to Git and GitHub</a></li>
<li><a class="" href="rstudio-see-git.html"><span class="header-section-number">13</span> Detect Git from RStudio</a></li>
<li><a class="" href="troubleshooting.html"><span class="header-section-number">14</span> RStudio, Git, GitHub Hell</a></li>
<li class="book-part">Early GitHub Wins</li>
<li><a class="" href="usage-intro.html">Get started with GitHub</a></li>
<li><a class="" href="new-github-first.html"><span class="header-section-number">15</span> New project, GitHub first</a></li>
<li><a class="" href="existing-github-first.html"><span class="header-section-number">16</span> Existing project, GitHub first</a></li>
<li><a class="" href="existing-github-last.html"><span class="header-section-number">17</span> Existing project, GitHub last</a></li>
<li><a class="active" href="rmd-test-drive.html"><span class="header-section-number">18</span> Test drive R Markdown</a></li>
<li><a class="" href="r-test-drive.html"><span class="header-section-number">19</span> Render an R script</a></li>
<li class="book-part">Git fundamentals</li>
<li><a class="" href="git-intro.html">Some Git basics</a></li>
<li><a class="" href="git-basics.html"><span class="header-section-number">20</span> Repo, commit, diff, tag</a></li>
<li><a class="" href="git-commands.html"><span class="header-section-number">21</span> Git commands</a></li>
<li><a class="" href="git-branches.html"><span class="header-section-number">22</span> Branches</a></li>
<li><a class="" href="git-remotes.html"><span class="header-section-number">23</span> Remotes</a></li>
<li class="book-part">Remote setups</li>
<li><a class="" href="remote-scenarios-intro.html">Git remote setups</a></li>
<li><a class="" href="common-remote-setups.html"><span class="header-section-number">24</span> Common remote setups</a></li>
<li><a class="" href="equivocal.html"><span class="header-section-number">25</span> Equivocal remote setups</a></li>
<li class="book-part">Daily Workflows</li>
<li><a class="" href="workflows-intro.html">Useful Git patterns for real life</a></li>
<li><a class="" href="repeated-amend.html"><span class="header-section-number">26</span> The Repeated Amend</a></li>
<li><a class="" href="push-rejected.html"><span class="header-section-number">27</span> Dealing with push rejection</a></li>
<li><a class="" href="pull-tricky.html"><span class="header-section-number">28</span> Pull, but you have local work</a></li>
<li><a class="" href="time-travel-see-past.html"><span class="header-section-number">29</span> Time travel: See the past</a></li>
<li><a class="" href="fork-and-clone.html"><span class="header-section-number">30</span> Fork and clone</a></li>
<li><a class="" href="upstream-changes.html"><span class="header-section-number">31</span> Get upstream changes for a fork</a></li>
<li><a class="" href="pr-extend.html"><span class="header-section-number">32</span> Explore and extend a pull request</a></li>
<li><a class="" href="workflows-browsability.html"><span class="header-section-number">33</span> Make a GitHub repo browsable</a></li>
<li class="book-part">Activity prompts</li>
<li><a class="" href="clone.html"><span class="header-section-number">34</span> Clone a repo</a></li>
<li><a class="" href="bingo.html"><span class="header-section-number">35</span> Create a bingo card</a></li>
<li><a class="" href="burn.html"><span class="header-section-number">36</span> Burn it all down</a></li>
<li><a class="" href="reset.html"><span class="header-section-number">37</span> Resetting</a></li>
<li><a class="" href="search.html"><span class="header-section-number">38</span> Search GitHub</a></li>
<li class="book-part">Notes</li>
<li><a class="" href="notes-intro.html">Notes</a></li>
<li><a class="" href="classroom-overview.html"><span class="header-section-number">39</span> Run a course with GitHub</a></li>
<li><a class="" href="ideas-for-content.html"><span class="header-section-number">40</span> Ideas for content</a></li>
<li><a class="" href="bookdown-cheat-sheet.html"><span class="header-section-number">41</span> Bookdown cheat sheet</a></li>
<li class="book-part">Appendix</li>
<li><a class="" href="shell.html"><span class="header-section-number">A</span> The shell</a></li>
<li><a class="" href="comic-relief.html"><span class="header-section-number">B</span> Comic relief</a></li>
<li><a class="" href="resources.html"><span class="header-section-number">C</span> Resources</a></li>
<li><a class="" href="references.html"><span class="header-section-number">D</span> References</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/jennybc/happy-git-with-r">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="rmd-test-drive" class="section level1">
<h1>
<span class="header-section-number">18</span> Test drive R Markdown<a class="anchor" aria-label="anchor" href="#rmd-test-drive"><i class="fas fa-link"></i></a>
</h1>
<p>We will author an R Markdown document and render it to HTML.
We discuss how to keep the intermediate Markdown file, the figures, and what to commit to Git and push to GitHub.
If GitHub is the primary venue, we render directly to GitHub-flavored markdown and never create HTML.</p>
<p>Here is the official R Markdown documentation: <a href="http://rmarkdown.rstudio.com/" class="uri">http://rmarkdown.rstudio.com</a></p>
<div id="hello-world" class="section level2">
<h2>
<span class="header-section-number">18.1</span> Hello World<a class="anchor" aria-label="anchor" href="#hello-world"><i class="fas fa-link"></i></a>
</h2>
<p>We’ll practice with RStudio’s boilerplate R Markdown document.</p>
<p>Launch RStudio in a Project that is a Git repo that is connected to a GitHub repo.</p>
<p>We are modelling “walk before you run” here.
It is best to increase complexity in small increments.
We test our system’s ability to render the <a href="http://en.wikipedia.org/wiki/%22Hello,_world!%22_program">“hello world”</a> of R Markdown documents before we muddy the waters with our own, probably buggy, documents.</p>
<p>Do this: <em>File &gt; New File &gt; R Markdown …</em></p>
<ul>
<li>Give it an informative title. This will appear in the document but does not
necessarily have anything to do with the file’s name. But the title and
filename should be related! Why confuse yourself? The title is for human
eyeballs, so it can contain spaces and punctuation. The filename is for humans
and computers, so it should have similar words in it but no spaces and no
punctuation.</li>
<li>Accept the default Author or edit if you wish.</li>
<li>Accept the default output format of HTML.</li>
<li>Click OK.</li>
</ul>
<p>Save this document to a reasonable filename and location.
The filename should end in <code>.Rmd</code> or <code>.rmd</code>.
Save in the top-level of this RStudio project and Git repository, that is also current working directory.
Trust me on this and do this for a while.</p>
<p>You might want to commit at this point.
That will help you see exactly what’s happening with your files, because this will appear as a “diff” in the Git pane.
Making change very visible is one of the big benefits of using Git.</p>
<p>Click on “Knit HTML” or do <em>File &gt; Knit Document</em>.
RStudio should display a preview of the resulting HTML.
Also look at the file browser.
You should see the original R Markdown document, i.e. <code>foo.Rmd</code> AND the resulting HTML <code>foo.html</code>.</p>
<p>Congratulations, you’ve just made your first reproducible report with R Markdown.</p>
<p>This is another good time to commit changes.</p>
</div>
<div id="push-to-github" class="section level2">
<h2>
<span class="header-section-number">18.2</span> Push to GitHub<a class="anchor" aria-label="anchor" href="#push-to-github"><i class="fas fa-link"></i></a>
</h2>
<p>Push the current state to GitHub.</p>
<p>Go visit it in the browser.</p>
<p>Do you see the new files?
An R Markdown document and the associated HTML?
Visit both in the browser.
Verify this:</p>
<ul>
<li>Rmd is quite readable. But the output is obviously not there.</li>
<li>HTML is ugly.</li>
</ul>
</div>
<div id="output-format" class="section level2">
<h2>
<span class="header-section-number">18.3</span> Output format<a class="anchor" aria-label="anchor" href="#output-format"><i class="fas fa-link"></i></a>
</h2>
<p>Do you really want HTML?
Do you only want HTML?
Are you absolutely sure?
If so, you can skip this step!</p>
<p>The magical process that turns your R Markdown to HTML is like so:</p>
<pre><code>foo.Rmd --&gt; foo.md --&gt; foo.html</code></pre>
<p>Note the intermediate markdown, <code>foo.md</code>.
By default RStudio discards this, but you might want to hold on to that markdown file!</p>
<p>Why?
GitHub gives very special treatment to markdown files.
They are rendered in an almost HTML-like way.
This is great because it preserves all the charms of plain text, but gives you a pseudo-webpage for free when you visit the file in the browser.
In contrast, HTML is rendered as plain text on GitHub and you’ll have to take special measures to see it the way you want.</p>
<p>In many cases, you <em>only want the markdown</em>.
In that case, we switch the output format to <code>github_document</code>.
This means rendering look like this:</p>
<pre><code>foo.Rmd --&gt; foo.md</code></pre>
<p>where <code>foo.md</code> is GitHub-flavored markdown.
If you still want the HTML <em>but also the intermediate markdown</em>, there’s a way to request that too.</p>
<p>This point we’re making about the importance of <code>.md</code> files is why so many R packages have a <code>NEWS.md</code> file and <code>README.md</code>, often generated from <code>README.Rmd</code>.</p>
<p><strong>Output format</strong> is one of the many things we can control in the YAML frontmatter of <code>.Rmd</code> documents, i.e. the text at the top of your file between leading and trailing lines of <code>---</code>.</p>
<p>You can make some YAML changes via the RStudio IDE: click on the “gear” in the top bar of the source editor, near the “Knit HTML” button.
Select “Output options” and go to the Advanced tab and check “Keep markdown source file.”
Your YAML should now look more like this:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb96-1"><a href="rmd-test-drive.html#cb96-1"></a><span class="pp">---</span></span>
<span id="cb96-2"><a href="rmd-test-drive.html#cb96-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Something fascinating"</span></span>
<span id="cb96-3"><a href="rmd-test-drive.html#cb96-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Jenny Bryan"</span></span>
<span id="cb96-4"><a href="rmd-test-drive.html#cb96-4"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"2022-04-05"</span></span>
<span id="cb96-5"><a href="rmd-test-drive.html#cb96-5"></a><span class="fu">output</span><span class="kw">:</span></span>
<span id="cb96-6"><a href="rmd-test-drive.html#cb96-6"></a><span class="at">  </span><span class="fu">html_document</span><span class="kw">:</span></span>
<span id="cb96-7"><a href="rmd-test-drive.html#cb96-7"></a><span class="at">    </span><span class="fu">keep_md</span><span class="kw">:</span><span class="at"> </span><span class="ch">true</span></span>
<span id="cb96-8"><a href="rmd-test-drive.html#cb96-8"></a><span class="pp">---</span></span></code></pre></div>
<p>You should have gained the line <code>keep_md: true</code>.
You can also simply edit the file yourself to achieve this.
The IDE only exposes a small fraction of what’s possible to configure in the YAML.</p>
<p>In fact, a hand-edit is necessary if you want to keep only markdown and get GitHub-flavored markdown.
In that case, make your YAML look like this:</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb97-1"><a href="rmd-test-drive.html#cb97-1"></a><span class="pp">---</span></span>
<span id="cb97-2"><a href="rmd-test-drive.html#cb97-2"></a><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"Something fascinating"</span></span>
<span id="cb97-3"><a href="rmd-test-drive.html#cb97-3"></a><span class="fu">author</span><span class="kw">:</span><span class="at"> </span><span class="st">"Jenny Bryan"</span></span>
<span id="cb97-4"><a href="rmd-test-drive.html#cb97-4"></a><span class="fu">date</span><span class="kw">:</span><span class="at"> </span><span class="st">"2022-04-05"</span></span>
<span id="cb97-5"><a href="rmd-test-drive.html#cb97-5"></a><span class="fu">output</span><span class="kw">:</span><span class="at"> github_document</span></span>
<span id="cb97-6"><a href="rmd-test-drive.html#cb97-6"></a><span class="pp">---</span></span></code></pre></div>
<p>Save!</p>
<p>You might want to commit at this point.</p>
<p>Render via “Knit HTML” button.</p>
<p>Now revisit the file browser.
In addition to <code>foo.Rmd</code>, you should now see <code>foo.md</code>.
If there are R chunks that make figures, the usage of markdown output formats will also cause those figure files to be left behind in a sensibly named sub-directory, such as <code>foo_files</code>.</p>
<p>If you commit and push <code>foo.md</code> and everything inside <code>foo_files</code>, then anyone with permission to view your GitHub repo can see a decent-looking version of your report.</p>
<p>If your output format is <code>html_document</code>, you should still see <code>foo.html</code>.
If your output format is <code>github_document</code> and you see <code>foo.html</code>, that’s leftover from earlier experiments.
Delete that.
It will only confuse you later.</p>
<p>You might want to commit here.</p>
</div>
<div id="push-to-github-1" class="section level2">
<h2>
<span class="header-section-number">18.4</span> Push to GitHub<a class="anchor" aria-label="anchor" href="#push-to-github-1"><i class="fas fa-link"></i></a>
</h2>
<p>Push the current state to GitHub.</p>
<p>Go visit it in the browser.</p>
<p>Do you see the modifications and new file(s)?
Your <code>.Rmd</code> should be modified, i.e. you should see the changes you made to the YAML frontmatter.
And you should have gained, at least, the associated markdown file, <code>foo.md</code>.</p>
<ul>
<li>Visit the markdown file and compare to our previous HTML.</li>
<li>Do you see how the markdown is much more directly useful on GitHub?
Internalize this lesson.</li>
</ul>
</div>
<div id="put-your-stamp-on-it" class="section level2">
<h2>
<span class="header-section-number">18.5</span> Put your stamp on it<a class="anchor" aria-label="anchor" href="#put-your-stamp-on-it"><i class="fas fa-link"></i></a>
</h2>
<p>Select everything but the YAML frontmatter and … delete it!</p>
<p>Write a single sentence.</p>
<p>Insert an empty R chunk, via the “Chunk” menu in upper right of source editor or with the corresponding keyboard shortcut.</p>
<pre><code>```{r, eval=TRUE}
## insert your brilliant WORKING code here
```</code></pre>
<p>Insert 1 to 3 lines of functioning code that’s relevant to you or the project where you’re experimenting.
“Walk through” and run those lines using the “Run” button or the corresponding keyboard shortcut.
You MUST make sure your code actually works!</p>
<p>Satisfied? Save!</p>
<p>You might want to commit here.</p>
<p>Now render the whole document via “Knit HTML.” Voilà!</p>
<p>You might want to commit here.
And push.
And admire your evolving progress on GitHub.</p>
</div>
<div id="develop-your-report" class="section level2">
<h2>
<span class="header-section-number">18.6</span> Develop your report<a class="anchor" aria-label="anchor" href="#develop-your-report"><i class="fas fa-link"></i></a>
</h2>
<p>In this incremental manner, develop your report.
Add code to this chunk.
Refine it.
Add new chunks.
Go wild!
But keep running the code “manually” to make sure it actually works.</p>
<p>If the code doesn’t work with you babysitting it, I can guarantee you it will fail, in a more spectacular and cryptic way, when run at arms-length via “Knit HTML” or <code><a href="https://pkgs.rstudio.com/rmarkdown/reference/render.html">rmarkdown::render()</a></code>.</p>
<p>Clean out your workspace and restart R and re-run everything periodically, if things get weird.
There are lots of chunk menu items and keyboard shortcuts to accelerate this workflow.
Render the whole document often to catch errors when they’re easy to pinpoint and fix.
Save often and commit every time you reach a point that you’d like as a “fall back” position.</p>
<p>You’ll develop your own mojo soon, but this should give you your first successful R Markdown experience.</p>
</div>
<div id="publish-your-report" class="section level2">
<h2>
<span class="header-section-number">18.7</span> Publish your report<a class="anchor" aria-label="anchor" href="#publish-your-report"><i class="fas fa-link"></i></a>
</h2>
<p>If you’ve been making HTML, you can put that up on the web somewhere, email it to your collaborator, whatever.</p>
<p>No matter what, technically you can publish this report merely by pushing a rendered version to GitHub.
However, certain practices make this effort at publishing more satisfying for your audience.</p>
<p>Here are two behaviors I find very frustrating:</p>
<ul>
<li>“Here is my code. Behold.” This is when someone only pushes their source, i.e.
R Markdown or R code, AND they really want other people to appreciate their
“product”. The implicit assumption is that the target audience will download
all of the data and code and execute it locally.</li>
<li>“Here is my HTML. Behold.” This is when someone accepts the default HTML-only
output. Remember, HTML files are GitHub are not readable by humans. Therefore,
the implicit assumption is that the target audience will download the repo
and point their browser at this HTML file, in order to see it.
HTML on GitHub? It’s not readable by humans.</li>
</ul>
<p>Sometimes it’s just very unrealistic to expect your audience to take the extra steps described above.
Often, with a very small change on your end, you can create an artefact on GitHub that your target audience can immediately appreciate.</p>
<p>Creating, committing, and pushing markdown (i.e., <code>.md</code> files) is a very functional, lighweight publishing strategy.
Use <code>output: github_document</code> or, if output is <code>html_document</code>, add <code>keep_md: true</code>.
In both cases, it is critical to also commit and push everything inside <code>foo_files</code>, i.e. any figures that have been created.
Now people can visit and consume your work on GitHub, like any other webpage.</p>
<p>This is (sort of) another example of a generally worthy principle, which is keeping things machine- and human-readable, whenever possible.
By making <code>foo.Rmd</code> available, others can see and run your <strong>actual code</strong>.
By also sharing <code>foo.md</code> and/or <code>foo.html</code>, others can casually browse your end product and decide if they want to obtain and run the code.</p>
</div>
<div id="html-on-github" class="section level2">
<h2>
<span class="header-section-number">18.8</span> HTML on GitHub<a class="anchor" aria-label="anchor" href="#html-on-github"><i class="fas fa-link"></i></a>
</h2>
<p>HTML files, such as <code>foo.html</code>, are not immediately useful on GitHub (though your local versions are easily viewable).
Visit one and you’ll see the raw HTML.
Yuck.
But there are ways to get a preview: such as <a href="http://htmlpreview.github.io/" class="uri">http://htmlpreview.github.io</a>. Expect much pain with HTML files inside private repos (hence the recommendations above to emphasize markdown).
When it becomes vital for the whole world to see proper HTML in its full glory, it’s time to use a more sophisticated web publishing strategy.</p>
<p>I have more <a href="workflows-browsability.html#workflows-browsability">general ideas</a> about how to make a GitHub repo function as a website.</p>
</div>
<div id="rmd-troubleshooting" class="section level2">
<h2>
<span class="header-section-number">18.9</span> Troubleshooting<a class="anchor" aria-label="anchor" href="#rmd-troubleshooting"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Make sure RStudio and the rmarkdown package (and its dependencies) are up-to-date.</strong>
In case of catastrophic failure to render the boilerplate R Markdown document, consider that your software may be too old.
Details on the system used to render this document and how to check your setup:</p>
<ul>
<li>rmarkdown version 2.13.
Use <code>packageVersion("rmarkdown")</code> to check yours.</li>
<li>R version 4.1.3 (2022-03-10). Use <code>R.version.string</code> to check yours.</li>
<li>RStudio IDE 2021.9.0.341 (“Ghost Orchid” Preview).
Use <em>RStudio &gt; About RStudio</em> or <code>RStudio.Version()$version</code> to check yours.</li>
</ul>
<p><strong>Get rid of your <code>.Rprofile</code></strong>, at least temporarily.
I have found that a “mature” <code>.Rprofile</code> that has accumulated haphazardly over the years can cause trouble.
Specifically, if you’ve got anything in there relating to knitr, markdown, rmarkdown, or RStudio itself, it may be preventing the installation or usage of the most recent goodies.
Comment the whole file out or rename it to something else and relaunch or even re-install RStudio.</p>
<p><strong>“I have ignored your advice and dumped a bunch of code in at once. Now my Rmd does not render.”</strong>
If you can’t figure out what’s wrong by reading the error messages, pick one:</p>
<ul>
<li>Back out of these changes, get back to a functional state (possibly with no
code), and restore them gradually. Run your code interactively to make sure it
works. Render the entire document frequently. Commit after each successful
addition! When you re-introduce the broken code, now it will be part of a
small change and the root problem will be much easier to pinpoint and fix.</li>
<li>Tell knitr to soldier on, even in the presence of errors. Some problems are
easier to diagnose if you can execute specific R statements during rendering
and leave more evidence behind for forensic examination.
<ul>
<li>
<p>Insert this chunk near the top of your <code>.Rmd</code> document:</p>
<pre><code>```{r setup, include = FALSE, cache = FALSE}
knitr::opts_chunk$set(error = TRUE)
```</code></pre>
</li>
<li>
<p>If it’s undesirable to globally accept errors, you can still specify
<code>error = TRUE</code> for a specific chunk like so:</p>
<pre><code>```{r wing-and-a-prayer, error = TRUE}
## your sketchy code goes here ;)
```</code></pre>
</li>
</ul>
</li>
<li>Adapt the <a href="http://webchick.net/node/99">“git bisect” strategy</a>:
<ul>
<li>Put <code><a href="https://rdrr.io/pkg/knitr/man/knit_exit.html">knitr::knit_exit()</a></code> somewhere early in your <code>.Rmd</code> document, either in
inline R code or in a chunk.
Keep moving it earlier until things work.
Now move it down in the document.
Eventually you’ll be able to narrow down the location of your broken code
well enough to find the line(s) and fix it.</li>
</ul>
</li>
</ul>
<p><strong>Check your working directory.</strong>
It’s going to break your heart as you learn how often your mistakes are really mundane and basic.
Ask me how I know.
When things go wrong consider:</p>
<ul>
<li>What is the working directory?</li>
<li>Is that file I want to read/write actually where I think it is?</li>
</ul>
<p>Drop these commands into R chunks to check the above:</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/base/getwd.html">getwd()</a></code> will display working directory at <strong>run time</strong>.
If you monkeyed around with working directory with, e.g., the mouse, maybe
it’s set to one place for your interactive development and another when
“Knit HTML” takes over?</li>
<li>
<code><a href="https://rdrr.io/r/base/list.files.html">list.files()</a></code> will list the files in working directory.
Is the file you want even there?</li>
</ul>
<p><strong>Don’t try to change working directory within an R Markdown document</strong>.
Just don’t.
See <a href="https://yihui.name/knitr/faq/">knitr FAQ #5</a>.
That is all.</p>
<p><strong>Don’t be in a hurry to create a complicated sub-directory structure.</strong>
RStudio/knitr/rmarkdown (which bring you the “Knit HTML” button) are rather opinionated about the working directory being set to the <code>.Rmd</code> file’s location and about all files living together in one big happy directory.
This can all be worked around.
For example, I <a href="https://github.com/jennybc/here_here#readme">recommend the here package</a> for building file paths, once you require sub-directories.
But don’t do this until you really need it.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="existing-github-last.html"><span class="header-section-number">17</span> Existing project, GitHub last</a></div>
<div class="next"><a href="r-test-drive.html"><span class="header-section-number">19</span> Render an R script</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#rmd-test-drive"><span class="header-section-number">18</span> Test drive R Markdown</a></li>
<li><a class="nav-link" href="#hello-world"><span class="header-section-number">18.1</span> Hello World</a></li>
<li><a class="nav-link" href="#push-to-github"><span class="header-section-number">18.2</span> Push to GitHub</a></li>
<li><a class="nav-link" href="#output-format"><span class="header-section-number">18.3</span> Output format</a></li>
<li><a class="nav-link" href="#push-to-github-1"><span class="header-section-number">18.4</span> Push to GitHub</a></li>
<li><a class="nav-link" href="#put-your-stamp-on-it"><span class="header-section-number">18.5</span> Put your stamp on it</a></li>
<li><a class="nav-link" href="#develop-your-report"><span class="header-section-number">18.6</span> Develop your report</a></li>
<li><a class="nav-link" href="#publish-your-report"><span class="header-section-number">18.7</span> Publish your report</a></li>
<li><a class="nav-link" href="#html-on-github"><span class="header-section-number">18.8</span> HTML on GitHub</a></li>
<li><a class="nav-link" href="#rmd-troubleshooting"><span class="header-section-number">18.9</span> Troubleshooting</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/jennybc/happy-git-with-r/blob/master/usage-rmd-and-github.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/jennybc/happy-git-with-r/edit/master/usage-rmd-and-github.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Happy Git and GitHub for the useR</strong>" was written by Jenny Bryan, the STAT 545 TAs, Jim Hester. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org/">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>

<!-- Mirrored from happygitwithr.com/rmd-test-drive.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 06 Apr 2022 03:45:36 GMT -->
</html>
